import{r as a,j as e,d as I,z as o,D as v}from"./index-BqRwj0yQ.js";import{T as H}from"./ToursGrid-DNLVvTON.js";import{u as G}from"./useTours-BUCtqLpG.js";function V(){const{tours:c,loading:S,error:w}=G(),[n,N]=a.useState(""),[m,F]=a.useState("all"),[p,T]=a.useState("all"),[x,P]=a.useState("all"),[d,C]=a.useState("featured"),[f,L]=a.useState(""),[g,M]=a.useState(""),j=a.useMemo(()=>{const r=new Set,u=new Set,h=new Set;return c.forEach(i=>{var l;i.season&&r.add(i.season),i.tourType&&u.add(i.tourType),(l=i.practicalInfo)!=null&&l.difficulty&&h.add(i.practicalInfo.difficulty)}),{seasons:Array.from(r),types:Array.from(u),difficulties:Array.from(h)}},[c]),y=a.useMemo(()=>{const r=s=>{const t=Number(s.replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},u=s=>{const t=Number(s.replace(/[^0-9]/g,""));return Number.isFinite(t)?t:0},h=f?Number(f):null,i=g?Number(g):null;let l=c.filter(s=>{const t=!n||s.title.toLowerCase().includes(n.toLowerCase())||s.description.toLowerCase().includes(n.toLowerCase())||s.tourType.toLowerCase().includes(n.toLowerCase()),D=m==="all"||s.season===m,A=p==="all"||s.tourType===p,B=x==="all"||s.practicalInfo.difficulty===x,b=r(s.price),z=h===null||b>=h,E=i===null||b<=i;return t&&D&&A&&B&&z&&E});return d==="price-low"?l=[...l].sort((s,t)=>r(s.price)-r(t.price)):d==="price-high"?l=[...l].sort((s,t)=>r(t.price)-r(s.price)):d==="duration"&&(l=[...l].sort((s,t)=>u(s.duration)-u(t.duration))),l},[x,g,f,n,m,d,c,p]);return e.jsxs("div",{className:"py-12",children:[e.jsx(I,{title:"Tours",description:"Browse Kyrgyzstan tours by season, difficulty, and price."}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl text-foreground mb-3",children:"Tours"}),e.jsx("p",{className:"text-muted-foreground",children:"Filter tours by season, type, difficulty, and budget."})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 grid grid-cols-1 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(o,{htmlFor:"search",children:"Search"}),e.jsx(v,{id:"search",placeholder:"Search tours",value:n,onChange:r=>N(r.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"season",children:"Season"}),e.jsxs("select",{id:"season",className:"h-10 w-full rounded-md border border-border bg-card px-3 text-sm",value:m,onChange:r=>F(r.target.value),children:[e.jsx("option",{value:"all",children:"All"}),j.seasons.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"tourType",children:"Type"}),e.jsxs("select",{id:"tourType",className:"h-10 w-full rounded-md border border-border bg-card px-3 text-sm",value:p,onChange:r=>T(r.target.value),children:[e.jsx("option",{value:"all",children:"All"}),j.types.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"difficulty",children:"Difficulty"}),e.jsxs("select",{id:"difficulty",className:"h-10 w-full rounded-md border border-border bg-card px-3 text-sm",value:x,onChange:r=>P(r.target.value),children:[e.jsx("option",{value:"all",children:"All"}),j.difficulties.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sortBy",children:"Sort"}),e.jsxs("select",{id:"sortBy",className:"h-10 w-full rounded-md border border-border bg-card px-3 text-sm",value:d,onChange:r=>C(r.target.value),children:[e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"duration",children:"Duration"})]})]}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"minPrice",children:"Min Price"}),e.jsx(v,{id:"minPrice",type:"number",min:"0",placeholder:"0",value:f,onChange:r=>L(r.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"maxPrice",children:"Max Price"}),e.jsx(v,{id:"maxPrice",type:"number",min:"0",placeholder:"2000",value:g,onChange:r=>M(r.target.value)})]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," of ",c.length," tours"]})]}),e.jsx(H,{tours:y,loading:S,error:w,stagger:!0})]})}export{V as ToursPage};
