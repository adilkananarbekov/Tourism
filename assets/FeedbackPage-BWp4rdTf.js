import{c as y,r as n,v,x as S,j as e,d as k,z as m,D as E,T as w,B as F,y as R,W as u,X as L,E as g,Y as M}from"./index-Ci_Ryvtz.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A=y("star",z),Y=R({name:g().min(1,"Name is required."),rating:M().min(1).max(5),comments:g().min(10,"Please provide at least 10 characters.")});function _(){const[r,i]=n.useState([]),[h,b]=n.useState(!0),[l,d]=n.useState(null),{register:c,handleSubmit:p,reset:j,formState:{errors:t,isSubmitting:x}}=v({resolver:S(Y),defaultValues:{name:"",rating:5,comments:""}}),f=n.useMemo(()=>{if(r.length===0)return 0;const s=r.reduce((a,o)=>a+o.rating,0);return Math.round(s/r.length*10)/10},[r]);n.useEffect(()=>{(async()=>{try{const a=await u();i(a)}catch(a){d(a instanceof Error?a.message:"Unable to load feedback.")}finally{b(!1)}})()},[]);const N=async s=>{d(null);try{await L({name:s.name,rating:s.rating,comments:s.comments});const a=await u();i(a)}catch(a){d(a instanceof Error?a.message:"Unable to submit feedback.")}j()};return e.jsxs("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-background",children:[e.jsx(k,{title:"Feedback",description:"Share your Kyrgyz Riders experience and read recent traveler feedback."}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl text-foreground mb-4",children:"Share Your Experience"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Tell us about your journey. Your feedback helps future travelers plan their adventures in Kyrgyzstan."}),e.jsxs("form",{onSubmit:p(N),className:"space-y-4 bg-card border border-border rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Name"}),e.jsx(E,{id:"name",placeholder:"Your name",...c("name")}),t.name&&e.jsx("p",{className:"text-xs text-red-600",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"rating",children:"Rating"}),e.jsx("select",{id:"rating",className:"w-full h-10 px-3 rounded-md border border-border bg-card text-sm",...c("rating",{valueAsNumber:!0}),children:[5,4,3,2,1].map(s=>e.jsxs("option",{value:s,children:[s," stars"]},s))}),t.rating&&e.jsx("p",{className:"text-xs text-red-600",children:t.rating.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"comments",children:"Comments"}),e.jsx(w,{id:"comments",rows:5,placeholder:"Share what you loved about the tour...",...c("comments")}),t.comments&&e.jsx("p",{className:"text-xs text-red-600",children:t.comments.message})]}),l&&e.jsx("p",{className:"text-sm text-red-600",children:l}),e.jsx(F,{type:"submit",className:"btn-micro bg-primary hover:bg-primary/90 text-primary-foreground",disabled:x,children:x?"Submitting...":"Submit Feedback"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl text-foreground",children:"Recent Feedback"}),e.jsxs("p",{className:"text-muted-foreground",children:["Average rating: ",f||"-"," / 5"]})]}),h?e.jsx("p",{className:"text-muted-foreground",children:"Loading feedback..."}):r.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No feedback yet."}):e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:[...Array(s.rating)].map((a,o)=>e.jsx(A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},o))}),e.jsx("p",{className:"text-muted-foreground mb-3",children:s.comments}),s.adminResponse&&e.jsxs("p",{className:"text-sm text-foreground mb-2",children:["Admin response: ",s.adminResponse]}),e.jsx("p",{className:"text-sm text-foreground",children:s.name})]},s.id))})]})]})]})}export{_ as FeedbackPage};
